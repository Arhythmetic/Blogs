---
title: 从双工的角度看 TCP 连接的建立与释放
date:
updated:
categories:
- 计算机网络
- TCP
tags:
- 思考
---

# 从双工的角度看 TCP 连接的建立与释放

由于 TCP 是一个全双工的协议，因此我们可以从全双工的角度来理解 TCP 连接的建立与释放的过程。

## 什么是双工？

首先，何为全双工。全双工是指协议允许数据在两个方向上同时传输。

其次，何为半双工。半双工是指协议允许数据在两个方向上传输，但不能同时进行。

可以看到，全双工是包含半双工的。

## TCP 连接的建立（三次握手）

而要理解建立 TCP 连接为什么需要三次握手，我们甚至都不需要用全双工这个概念，半双工就够了。

现在试想，要建立一个半双工的连接，我们需要确认什么？

其实概括起来一共就4点：

1.我方有发送数据的能力；

2.对方有发送数据的能力；

3.我方有接收数据的能力；

4.对方有接收数据的能力。

现在我们来看三次握手的具体过程：

1.我方向对方发送一个数据包，并且对方接收到了。

这个时候对方确认了我方有发送数据的能力。

2.对方基于收到的数据包，向我方发送一个数据包，并且我方接收到了。

这个时候我方确认了对方有接收和发送数据的能力。

3.我方基于收到的数据包，向对方发送一个数据包，并且对方接收到了。

这个时候对方确认了我方具有接收（和发送）数据的能力。

至此，建立一个半双工连接需要确认的4点都已确认完毕。

这就是为什么偏偏是三次握手。

## TCP 连接的释放（四次挥手）
